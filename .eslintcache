[{"/Users/micahlund/Downloads/social-media-demo/src/index.js":"1","/Users/micahlund/Downloads/social-media-demo/src/App.js":"2","/Users/micahlund/Downloads/social-media-demo/src/components/Layout/Layout.js":"3","/Users/micahlund/Downloads/social-media-demo/src/components/Backdrop/Backdrop.js":"4","/Users/micahlund/Downloads/social-media-demo/src/components/Toolbar/Toolbar.js":"5","/Users/micahlund/Downloads/social-media-demo/src/components/ErrorHandler/ErrorHandler.js":"6","/Users/micahlund/Downloads/social-media-demo/src/components/Navigation/MainNavigation/MainNavigation.js":"7","/Users/micahlund/Downloads/social-media-demo/src/components/Navigation/MobileNavigation/MobileNavigation.js":"8","/Users/micahlund/Downloads/social-media-demo/src/pages/Feed/Feed.js":"9","/Users/micahlund/Downloads/social-media-demo/src/pages/Feed/SinglePost/SinglePost.js":"10","/Users/micahlund/Downloads/social-media-demo/src/pages/Auth/Login.js":"11","/Users/micahlund/Downloads/social-media-demo/src/pages/Auth/Signup.js":"12","/Users/micahlund/Downloads/social-media-demo/src/pages/Auth/Auth.js":"13","/Users/micahlund/Downloads/social-media-demo/src/components/Logo/Logo.js":"14","/Users/micahlund/Downloads/social-media-demo/src/components/Modal/Modal.js":"15","/Users/micahlund/Downloads/social-media-demo/src/components/Navigation/MobileToggle/MobileToggle.js":"16","/Users/micahlund/Downloads/social-media-demo/src/components/Navigation/NavigationItems/NavigationItems.js":"17","/Users/micahlund/Downloads/social-media-demo/src/components/Button/Button.js":"18","/Users/micahlund/Downloads/social-media-demo/src/components/Paginator/Paginator.js":"19","/Users/micahlund/Downloads/social-media-demo/src/components/Loader/Loader.js":"20","/Users/micahlund/Downloads/social-media-demo/src/components/Image/Image.js":"21","/Users/micahlund/Downloads/social-media-demo/src/util/validators.js":"22","/Users/micahlund/Downloads/social-media-demo/src/components/Feed/FeedEdit/FeedEdit.js":"23","/Users/micahlund/Downloads/social-media-demo/src/components/Feed/Post/Post.js":"24","/Users/micahlund/Downloads/social-media-demo/src/components/Form/Input/Input.js":"25","/Users/micahlund/Downloads/social-media-demo/src/util/image.js":"26","/Users/micahlund/Downloads/social-media-demo/src/components/Form/Input/FilePicker.js":"27"},{"size":469,"mtime":1538743433000,"results":"28","hashOfConfig":"29"},{"size":7160,"mtime":1611123831000,"results":"30","hashOfConfig":"29"},{"size":282,"mtime":1538742493000,"results":"31","hashOfConfig":"29"},{"size":329,"mtime":1538748751000,"results":"32","hashOfConfig":"29"},{"size":172,"mtime":1538741009000,"results":"33","hashOfConfig":"29"},{"size":511,"mtime":1539112887000,"results":"34","hashOfConfig":"29"},{"size":680,"mtime":1539002555000,"results":"35","hashOfConfig":"29"},{"size":534,"mtime":1539002555000,"results":"36","hashOfConfig":"29"},{"size":8653,"mtime":1611103103000,"results":"37","hashOfConfig":"29"},{"size":1436,"mtime":1611033257000,"results":"38","hashOfConfig":"29"},{"size":2854,"mtime":1539064683000,"results":"39","hashOfConfig":"29"},{"size":3244,"mtime":1539064735000,"results":"40","hashOfConfig":"29"},{"size":153,"mtime":1538984839000,"results":"41","hashOfConfig":"29"},{"size":133,"mtime":1539069682000,"results":"42","hashOfConfig":"29"},{"size":796,"mtime":1539153895000,"results":"43","hashOfConfig":"29"},{"size":327,"mtime":1538740342000,"results":"44","hashOfConfig":"29"},{"size":814,"mtime":1539015442000,"results":"45","hashOfConfig":"29"},{"size":680,"mtime":1539014638000,"results":"46","hashOfConfig":"29"},{"size":542,"mtime":1539017555000,"results":"47","hashOfConfig":"29"},{"size":189,"mtime":1538983529000,"results":"48","hashOfConfig":"29"},{"size":323,"mtime":1538753274000,"results":"49","hashOfConfig":"29"},{"size":499,"mtime":1539064354000,"results":"50","hashOfConfig":"29"},{"size":5290,"mtime":1539069608000,"results":"51","hashOfConfig":"29"},{"size":842,"mtime":1539014438000,"results":"52","hashOfConfig":"29"},{"size":1084,"mtime":1538905200000,"results":"53","hashOfConfig":"29"},{"size":297,"mtime":1538752894000,"results":"54","hashOfConfig":"29"},{"size":492,"mtime":1538755800000,"results":"55","hashOfConfig":"29"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},"mv7vg",{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"58"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},"/Users/micahlund/Downloads/social-media-demo/src/index.js",[],["112","113"],"/Users/micahlund/Downloads/social-media-demo/src/App.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Layout/Layout.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Backdrop/Backdrop.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Toolbar/Toolbar.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/ErrorHandler/ErrorHandler.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Navigation/MainNavigation/MainNavigation.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Navigation/MobileNavigation/MobileNavigation.js",[],"/Users/micahlund/Downloads/social-media-demo/src/pages/Feed/Feed.js",["114"],"import React, { Component, Fragment } from \"react\";\n\nimport Post from \"../../components/Feed/Post/Post\";\nimport Button from \"../../components/Button/Button\";\nimport FeedEdit from \"../../components/Feed/FeedEdit/FeedEdit\";\nimport Input from \"../../components/Form/Input/Input\";\nimport Paginator from \"../../components/Paginator/Paginator\";\nimport Loader from \"../../components/Loader/Loader\";\nimport ErrorHandler from \"../../components/ErrorHandler/ErrorHandler\";\nimport \"./Feed.css\";\n\nclass Feed extends Component {\n  state = {\n    isEditing: false,\n    posts: [],\n    totalPosts: 0,\n    editPost: null,\n    status: \"\",\n    postPage: 1,\n    postsLoading: true,\n    editLoading: false,\n  };\n\n  componentDidMount() {\n    fetch(\"http://localhost:8080/auth/status\", {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then((res) => {\n        if (res.status !== 200) {\n          throw new Error(\"Failed to fetch user status.\");\n        }\n        return res.json();\n      })\n      .then((resData) => {\n        this.setState({ status: resData.status });\n      })\n      .catch(this.catchError);\n\n    this.loadPosts();\n  }\n\n  loadPosts = (direction) => {\n    if (direction) {\n      this.setState({ postsLoading: true, posts: [] });\n    }\n    let page = this.state.postPage;\n    if (direction === \"next\") {\n      page++;\n      this.setState({ postPage: page });\n    }\n    if (direction === \"previous\") {\n      page--;\n      this.setState({ postPage: page });\n    }\n    fetch(\"http://localhost:8080/feed/posts?page=\" + page, {\n      headers: {\n        Authorization: \"Bearer \" + this.props.token\n      }\n    })\n      .then((res) => {\n        if (res.status !== 200) {\n          throw new Error(\"Failed to fetch posts.\");\n        }\n        return res.json();\n      })\n      .then((resData) => {\n        this.setState({\n          posts: resData.posts.map((post) => {\n            return {\n              ...post,\n              imagePath: post.imageUrl,\n            };\n          }),\n          totalPosts: resData.totalItems,\n          postsLoading: false,\n        });\n      })\n      .catch(this.catchError);\n  };\n\n  statusUpdateHandler = event => {\n    event.preventDefault();\n    fetch('http://localhost:8080/auth/status', {\n      method: 'PATCH',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        status: this.state.status\n      })\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Can't update status!\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n      })\n      .catch(this.catchError);\n  };\n\n  newPostHandler = () => {\n    this.setState({ isEditing: true });\n  };\n\n  startEditPostHandler = (postId) => {\n    this.setState((prevState) => {\n      const loadedPost = { ...prevState.posts.find((p) => p._id === postId) };\n\n      return {\n        isEditing: true,\n        editPost: loadedPost,\n      };\n    });\n  };\n\n  cancelEditHandler = () => {\n    this.setState({ isEditing: false, editPost: null });\n  };\n\n  finishEditHandler = (postData) => {\n    this.setState({\n      editLoading: true,\n    });\n\n    const formData = new FormData();\n    formData.append(\"title\", postData.title);\n    formData.append(\"content\", postData.content);\n    formData.append(\"image\", postData.image);\n\n    let url = \"http://localhost:8080/feed/post\";\n    let method = \"POST\";\n    if (this.state.editPost) {\n      url = \"http://localhost:8080/feed/post/\" + this.state.editPost._id;\n      method = \"PUT\";\n    }\n\n    fetch(url, {\n      method: method,\n      body: formData,\n      headers: {\n        Authorization: \"Bearer \" + this.props.token\n      }\n    })\n      .then((res) => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Creating or editing a post failed!\");\n        }\n        return res.json();\n      })\n      .then((resData) => {\n        console.log(resData);\n        const post = {\n          _id: resData.post._id,\n          title: resData.post.title,\n          content: resData.post.content,\n          creator: resData.post.creator,\n          createdAt: resData.post.createdAt,\n        };\n        this.setState((prevState) => {\n        //   let updatedPosts = [...prevState.posts];\n        //   if (prevState.editPost) {\n        //     const postIndex = prevState.posts.findIndex(\n        //       (p) => p._id === prevState.editPost._id\n        //     );\n        //     updatedPosts[postIndex] = post;\n        //   } else if (prevState.posts.length < 2) {\n        //     updatedPosts = prevState.posts.concat(post);\n        //   }\n        //   return {\n        //     posts: updatedPosts,\n        //     isEditing: false,\n        //     editPost: null,\n        //     editLoading: false,\n        //   };\n        // });\n        return {\n          isEditing: false,\n          editPost: null,\n          editLoading: false\n        };\n      });\n      })\n      .catch((err) => {\n        console.log(err);\n        this.setState({\n          isEditing: false,\n          editPost: null,\n          editLoading: false,\n          error: err,\n        });\n      });\n  };\n\n  statusInputChangeHandler = (input, value) => {\n    this.setState({ status: value });\n  };\n\n  deletePostHandler = (postId) => {\n    this.setState({ postsLoading: true });\n    fetch(\"http://localhost:8080/feed/post/\" + postId, {\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \" + this.props.token\n      }\n    })\n      .then((res) => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Deleting a post failed!\");\n        }\n        return res.json();\n      })\n      .then((resData) => {\n        console.log(resData);\n        this.loadPosts();\n        // this.setState((prevState) => {\n        //   const updatedPosts = prevState.posts.filter((p) => p._id !== postId);\n        //   return { posts: updatedPosts, postsLoading: false };\n        // });\n      })\n      .catch((err) => {\n        console.log(err);\n        this.setState({ postsLoading: false });\n      });\n  };\n\n  errorHandler = () => {\n    this.setState({ error: null });\n  };\n\n  catchError = (error) => {\n    this.setState({ error: error });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <ErrorHandler error={this.state.error} onHandle={this.errorHandler} />\n        <FeedEdit\n          editing={this.state.isEditing}\n          selectedPost={this.state.editPost}\n          loading={this.state.editLoading}\n          onCancelEdit={this.cancelEditHandler}\n          onFinishEdit={this.finishEditHandler}\n        />\n        <section className=\"feed__status\">\n          <form onSubmit={this.statusUpdateHandler}>\n            <Input\n              type=\"text\"\n              placeholder=\"Your status\"\n              control=\"input\"\n              onChange={this.statusInputChangeHandler}\n              value={this.state.status}\n            />\n            <Button mode=\"flat\" type=\"submit\">\n              Update\n            </Button>\n          </form>\n        </section>\n        <section className=\"feed__control\">\n          <Button mode=\"raised\" design=\"accent\" onClick={this.newPostHandler}>\n            New Post\n          </Button>\n        </section>\n        <section className=\"feed\">\n          {this.state.postsLoading && (\n            <div style={{ textAlign: \"center\", marginTop: \"2rem\" }}>\n              <Loader />\n            </div>\n          )}\n          {this.state.posts.length <= 0 && !this.state.postsLoading ? (\n            <p style={{ textAlign: \"center\" }}>No posts found.</p>\n          ) : null}\n          {!this.state.postsLoading && (\n            <Paginator\n              onPrevious={this.loadPosts.bind(this, \"previous\")}\n              onNext={this.loadPosts.bind(this, \"next\")}\n              lastPage={Math.ceil(this.state.totalPosts / 2)}\n              currentPage={this.state.postPage}\n            >\n              {this.state.posts.map((post) => (\n                <Post\n                  key={post._id}\n                  id={post._id}\n                  author={post.creator.name}\n                  date={new Date(post.createdAt).toLocaleDateString(\"en-US\")}\n                  title={post.title}\n                  image={post.imageUrl}\n                  content={post.content}\n                  onStartEdit={this.startEditPostHandler.bind(this, post._id)}\n                  onDelete={this.deletePostHandler.bind(this, post._id)}\n                />\n              ))}\n            </Paginator>\n          )}\n        </section>\n      </Fragment>\n    );\n  }\n}\n\nexport default Feed;\n","/Users/micahlund/Downloads/social-media-demo/src/pages/Feed/SinglePost/SinglePost.js",[],"/Users/micahlund/Downloads/social-media-demo/src/pages/Auth/Login.js",[],"/Users/micahlund/Downloads/social-media-demo/src/pages/Auth/Signup.js",[],"/Users/micahlund/Downloads/social-media-demo/src/pages/Auth/Auth.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Logo/Logo.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Modal/Modal.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Navigation/MobileToggle/MobileToggle.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Navigation/NavigationItems/NavigationItems.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Button/Button.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Paginator/Paginator.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Loader/Loader.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Image/Image.js",[],"/Users/micahlund/Downloads/social-media-demo/src/util/validators.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Feed/FeedEdit/FeedEdit.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Feed/Post/Post.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Form/Input/Input.js",[],"/Users/micahlund/Downloads/social-media-demo/src/util/image.js",[],"/Users/micahlund/Downloads/social-media-demo/src/components/Form/Input/FilePicker.js",[],{"ruleId":"115","replacedBy":"116"},{"ruleId":"117","replacedBy":"118"},{"ruleId":"119","severity":1,"message":"120","line":158,"column":15,"nodeType":"121","messageId":"122","endLine":158,"endColumn":19},"no-native-reassign",["123"],"no-negated-in-lhs",["124"],"no-unused-vars","'post' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]